ext {
	/* Project Information */
	projectGroup = 'com.unideb.qsa'
	projectVersion = project.getProperties().get('release.version') ?: 'RELEASE.VERSION.UNKNOWN'
	/* Secrets */
	// Note: Use your username and token
	githubToken = System.getenv('GITHUB_TOKEN') ?: 'YOUR_TOKEN'
	githubUsername = System.getenv('GITHUB_USERNAME') ?: 'YOUR_USERNAME'
	print('Release version [' + projectVersion + ']')
}

group = projectGroup
version = projectVersion

apply plugin: 'maven'
apply plugin: 'java'
apply plugin: 'java-library'

repositories {
	mavenLocal()
	mavenCentral()
	jcenter()
	maven {
		url 'https://jitpack.io'
	}
	maven {
		url 'https://maven.pkg.github.com/queueing-systems-assistance/qsa'
		credentials {
			username = githubUsername
			password = githubToken
		}
	}
}

dependencies {
	testImplementation 'com.unideb.qsa:qsa-config-domain:1.0.11'
	testImplementation 'com.unideb.qsa:qsa-config-validator:1.0.13'
	testImplementation 'com.unideb.qsa:qsa-config-assembler:1.0.3'
	testImplementation 'org.testng:testng:7.3.0'
}

sourceCompatibility = '11'

tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

test {
	useTestNG()
	testLogging.showStandardStreams = true
}

afterEvaluate {
	install.dependsOn(assembleConfigs)
}

task assembleConfigs(type: JavaExec) {
	classpath = sourceSets.test.runtimeClasspath
	main = "com.unideb.qsa.config.assembler.AssemblerApplication"
}